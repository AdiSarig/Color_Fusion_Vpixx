% % runExperiment_script%clear allrng('shuffle','twister');KbName('UnifyKeyNames');% run polyfit here (dummy) so that loaded into memory for laterpolyfit([1 2 3],[4 5 6],2);%for coding/testing purposes, session structure is loaded here, for running%actual participants/collecting data, uncoment lines 16-19%load subj001_PilotTest_20210719T114459.mat  % initialize the session structuresession = initSession('triangulation:DCM');session.KEYS = getKeyBindings({'FACE','HOUSE','SEENOTHING','BRIFGLIMPSE','ALMOSTCLEAR','SUPERCLEAR','BLUEDOT'});% face-f house-h see nothing-1 brif glimpse-2 almost clear-3 superclear-4% this is easier for subjects to press the button% blue dot-spacedisp('OK, press any key to begin...')%pause% run the screen calibration%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% You really only need to do this once every couple of weeks, assuming no% one touches the monitor settings in the interim.%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% run_calibration; %save(sprintf('subj%02d_sess%02d_lumFunc_%s.mat',session.subjnum,session.sessnum,datestr(now,30)),'p','P','beta'); %%%%% need to set the value for p once done all the pilot test% get default parametersload subj00_sess00_lumFunc_20210827T155830.mat  session.params = initParams(p);% Check that the subject can fuse the stimuli% If fails after many attempts then send the subject home.nAttemptsCheckFusion = CheckFusion;% train the subjects to view all stimuli at high color contrast. runFaceHousePreview_15(session.params);runFaceHousePreview_13(session.params);runFaceHousePreview_11(session.params);% WARNING: if you abort the preview you must reinitialize params before% running the main experiment!%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% RUN A FEW MINUTES OF BLUE_DOT TASK HERE% practiceTrials_script;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%cInd = session.params.color.contrastLevel;session.params.color.red = session.params.color.palette.reds(cInd,:);session.params.color.green = session.params.color.palette.greens(cInd,:);    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% fail safe backup of session structuresave(sprintf('subj%02d_sess%02d_%s_%s.mat',session.subjnum,...    session.sessnum,'session',datestr(now,30)),'session');imgPath = 'stimRegular/';oneSession_script%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% run the psychophysics test    runFaceHouseTest; % expects session.params to be defined%%%%%%%%%%%%%%%%%% final save of datasave(sprintf('subj%02d_sess%02d_%s_%s.mat',session.subjnum,...    session.sessnum,'final',datestr(now,30)),'session'); disp('Done!')% All done!