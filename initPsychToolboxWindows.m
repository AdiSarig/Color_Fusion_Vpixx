function [w,textPos] = initPsychToolboxWindows(w,bgInd,cm,dsize,cmIND)%% function [w,lrect,rrect,textPos] =% initPsychToolboxWindows(w,bgInd,cm,dsize,cmIND)%    % open main window & get needed constants	if isempty(w)        % added 19 May 2011 (AS)        % In order to use color lookup table on Windows XP        %InitializeMatlabOpenGL([], 0, 1);        %%%%%%%%%%%%%%%        [w.w,w.rect]=Screen('OpenWindow',0, cm(bgInd,:),[],[],2);        ListenChar(2);        HideCursor;    end    %w.defcm = Screen('ReadNormalizedGammaTable', 0);	% prepare target screen	Screen(w.w,'TextSize',28);	Screen(w.w,'TextStyle',0);	Screen(w.w,'TextFont','Arial');        lrect = []; rrect = []; textPos = [];     if nargin > 2 % cm         %Screen('LoadNormalizedGammaTable', w.w, cm);         % screen dimensions and stimulus placement     end    %%%    if nargin > 3 % dsize        xmax=w.rect(3); ymax=w.rect(4);        [lctr,rctr]=IMG_POS(xmax,ymax);        % get positions of l and r images        lrect=[lctr-floor(dsize/2) lctr+floor(dsize/2)];        rrect=[rctr-floor(dsize/2) rctr+floor(dsize/2)];        % get positions of text        textPos = assignTextPos(lrect,rrect);    else        dsize = [0 0];    end    %%%    if nargin > 4 % cmIND for basic textures        % add frame and fixation to the background screen so only the image itself flickers        justFrameAndFix = AddFrameAndFix(ones(dsize)*bgInd,cmIND.FF_ind);        w.tex.justFrameAndFix = Screen('MakeTexture',w.w,ind2rgb(justFrameAndFix,cm));        % add frame w/o fixation for inter-trial interval        frameOnly = AddFrameAndFix(ones(dsize)*bgInd,cmIND.FF_ind,1); % last param is flag for no-fix        w.tex.frameOnly = Screen('MakeTexture',w.w,ind2rgb(frameOnly,cm));    end        w.lrect = lrect;    w.rrect = rrect;    w.dsize = dsize;        % blank screen    w.tex.blank = Screen('MakeTexture',w.w,ind2rgb(ones(w.rect(4),w.rect(3))*bgInd,cm));    Screen('DrawTexture',w.w,w.tex.blank);    Screen('flip',w.w);    function textPos = assignTextPos(lrect,rrect)	textPos(1).L.x=lrect(1)+5; % beneath frame, left justified	textPos(1).R.x=rrect(1)+5; 	textPos(1).L.y=lrect(4)+10; 	textPos(1).R.y=rrect(4)+10; 	textPos(1).size = 22;	textPos(2).L.x=lrect(1)+82; % in the middle of the frame 	textPos(2).R.x=rrect(1)+82; 	textPos(2).L.y=lrect(4)-81; 	textPos(2).R.y=rrect(4)-81; 	textPos(2).size = 18;        