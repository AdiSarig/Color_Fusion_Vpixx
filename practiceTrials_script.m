%% This script runs one session of the triangulation paradigm.% For each block (run) of trials, calls oneRun.m and also saves backup of% data from that run.%% It is assumed that a session object already exists and has been% intialized. This is a script instead of a function to make it easier to% resume the session in the event of an error or problem.%% 10 June 2021%%%%%%%%%%%%%%%%%%%%%%%%%%%session.imgPath = imgPath;%%%%%%%%%%%%%%%%%%%%%%%%%%nRuns = 1;nTrialsPerRun = 24;[TRIALS] = prepTrials(nRuns,nTrialsPerRun,session);session.practice.nRuns = nRuns;session.practice.nTrialsPerRun = nTrialsPerRun;try    w=[];    for iRun=1:nRuns         runNum = [iRun, nRuns];        trialsThisRun = [(iRun-1)*nTrialsPerRun+1 : iRun*nTrialsPerRun];        [trials,w]=oneRun(imgPath,TRIALS(trialsThisRun),session.params,w,runNum,0);        if isempty(w)            Screen('closeall'); % just in case!            warning('Aborted. You may still want to save a final copy of the data.')            return        end        session.practice.run(iRun).trials = trials;        WaitSecs(0.5);    end        w = closePsychToolboxWindows(w);    catch    ListenChar(0);    ShowCursor;    Screen('closeall');    rethrow(lasterror);end% w = closePsychToolboxWindows(w);%-- END --%